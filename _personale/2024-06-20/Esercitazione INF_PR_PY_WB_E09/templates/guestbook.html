<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Guestbook</title>
    <!-- Bootstrap 5 -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  </head>
  <body>
    <form id="msg-form">
        <div class="mb-3 mt-3">
          <label for="nome" class="form-label">Nome:</label>
          <input type="text" id="nome" placeholder="Il tuo nome" name="nome" required>
        </div>
        <div class="mb-3">
            <label for="messaggio">Messaggio:</label>
            <textarea class="form-control" rows="5" id="messaggio" name="text" required></textarea>
        </div>
        <button type="button" onclick="sendMessage()" class="btn btn-primary">Invia messaggio</button>
      </form>
      <p></p>
<div pt-5>
      <ul class="list-group list-group-flush" id="messaggi"><h2>Messaggi inviati:</h2></ul>
</div>


<script>
   function sendMessage() {
    let data = {
        'nome' : document.getElementById('nome').value,
        'messaggio' : document.getElementById('messaggio').value,
    }
    //invia la richiesta al server
    fetch('/api/guestbook', {
        method: 'POST',
        headers: {'Content-Type': 'application/json'},
        body: JSON.stringify(data)
    })
    .then(response => response.json())
    .then(result => {
        if (result.success) {
            fetchMessages();
            //Reset dei campi del form
            //...
        } else if (result.error) {
            alert(result.error)
        }
    })
    .catch(error => console.error('Error:', error));
   }
</script>
  </body>
</html>
